<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>site MDP</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<style>
    body {
        background: radial-gradient(circle at center, #04868f 0%, #3e1885 60%);
    }

    /* Ajout pour l'image en bas Ã  droite */
    #logo-bas-droite {
        position: fixed;
        right: 2vw;
        bottom: 4vh;
        max-width: 10vh;
        max-height: 10vh;
        min-width: 40px;
        min-height: 40px;
        width: 10vh;
        height: auto;
        z-index: 10;
    }

    @media (max-width: 600px) {
        #logo-bas-droite {
            max-width: 12vh;
            max-height: 8vh;
            right: 3vw;
            bottom: 2vh;
            width: 8vh;
        }
    }
</style>

<body>
    <!-- ...contenu principal... -->
    <div class="d-flex align-items-center justify-content-center vh-100">
        <form onsubmit="return false;">
            <div class="d-flex flex-column align-items-center">
                <h3 class="mb-4 text-center text-light">Mot de passe :</h3>
                <input type="password" id="motdepasse" name="motdepasse" maxlength="5"
                    class="visually-hidden position-absolute opacity-0" autocomplete="off" inputmode="numeric"
                    pattern="[0-9]*" style="z-index:-1;">
                <div id="password-dots" class="d-flex justify-content-center mb-2">
                    <!-- Points gÃ©nÃ©rÃ©s par JS -->
                </div>
                <button type="submit" class="btn btn-success btn-lg mt-4">Entrer</button>
                <p class="m-4 text-center text-light">Ton dÃ©fi est de trouver le mot de passe.
                    <br>Tu es libre d'utiliser tous les moyens Ã  ta disposition.
                    <br>Pour ce dÃ©fi, tu peux faire appel Ã  d'autres personnes, mais elles ne doivent pas le faire Ã  ta
                    place, juste t'aider.
                    <br>Bonne chance ! ðŸ˜Š
                </p>
            </div>
        </form>
    </div>
    <!-- Image positionnÃ©e en bas Ã  droite -->
     <a href="files/indice pour le mot de passe.txt" download="indice MDP"><img src="img/refait moi le logo d.png" alt="illiuminaty" id="logo-bas-droite"></a>
    <!-- Modal Bootstrap -->
    <div class="modal fade" id="incorrectModal" tabindex="-1" aria-labelledby="incorrectModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-danger" id="incorrectModalLabel">Erreur</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fermer"></button>
                </div>
                <div class="modal-body">
                    Mot de passe incorrect
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Fermer</button>
                </div>
            </div>
        </div>
    </div>
    <script>
        // GÃ©nÃ©ration des points
        const DOTS = 4;
        const dotsContainer = document.getElementById('password-dots');
        for (let i = 0; i < DOTS; i++) {
            const dot = document.createElement('span');
            dot.className = 'mx-2 rounded-circle bg-dark-subtle';
            dot.style.width = '20px';
            dot.style.height = '20px';
            dot.style.display = 'inline-block';
            dot.style.transition = 'background 0.2s';
            dotsContainer.appendChild(dot);
        }

        const input = document.getElementById('motdepasse');
        // Focus sur le container pour dÃ©clencher le focus sur l'input cachÃ©
        dotsContainer.tabIndex = 0;
        dotsContainer.addEventListener('focus', function () {
            input.focus();
            input.click(); // dÃ©clenche le clavier virtuel sur certains navigateurs mobiles
        });


        function updateDots() {
            const value = input.value;
            const dots = dotsContainer.children;
            for (let i = 0; i < DOTS; i++) {
                if (i < value.length) {
                    dots[i].classList.remove('bg-dark-subtle');
                    dots[i].style.background = '#ebf62a'; // jaune
                } else {
                    dots[i].style.background = '';
                    dots[i].classList.add('bg-dark-subtle');
                }
            }
        }

        input.addEventListener('input', updateDots);

        // VÃ©rification du mot de passe Ã  la soumission
        document.querySelector('form').addEventListener('submit', function (e) {
            e.preventDefault();
            if (input.value === '8953') {
                window.location.href = 'page2.html';
            } else {
                // Affiche la modal Bootstrap
                const modal = new bootstrap.Modal(document.getElementById('incorrectModal'));
                modal.show();
                input.value = '';
                updateDots();
            }
        });

        window.addEventListener('DOMContentLoaded', function () {
            input.focus();
            input.click();
            updateDots();
        });


        // Remplace l'Ã©couteur sur dotsContainer par un Ã©couteur global
        document.addEventListener('keydown', function (e) {
            if (document.activeElement.tagName === 'INPUT' && document.activeElement.type === 'password') {
                // L'input gÃ¨re dÃ©jÃ  l'Ã©vÃ©nement
                return;
            }
            // N'accepte que les chiffres
            if (/^[0-9]$/.test(e.key) && input.value.length < DOTS) {
                input.value += e.key;
                updateDots();
                e.preventDefault();
            } else if (e.key === 'Backspace') {
                input.value = input.value.slice(0, -1);
                updateDots();
                e.preventDefault();
            }
        });

        // EmpÃªche la saisie de caractÃ¨res non numÃ©riques dans l'input cachÃ©
        input.addEventListener('keypress', function (e) {
            if (!/[0-9]/.test(e.key)) {
                e.preventDefault();
            }
        });

        // Limite la position de l'image Ã  max 50% du bas du bouton "Entrer"
        window.addEventListener('DOMContentLoaded', function () {
            function repositionLogo() {
                const btn = document.querySelector('button[type="submit"]');
                const logo = document.getElementById('logo-bas-droite');
                if (!btn || !logo) return;
                const btnRect = btn.getBoundingClientRect();
                // Position du bas du bouton par rapport Ã  la fenÃªtre
                const btnBottom = btnRect.bottom;
                // Hauteur de la fenÃªtre
                const winH = window.innerHeight;
                // Calcul de la limite max (50% du bas du bouton)
                const maxLogoBottom = winH - (btnBottom + (winH - btnBottom) * 0.5);
                // On veut que le logo soit au moins Ã  4vh du bas, mais jamais plus haut que maxLogoBottom
                let bottom = 4 * winH / 100;
                if (bottom < maxLogoBottom) {
                    logo.style.bottom = bottom + 'px';
                } else {
                    logo.style.bottom = maxLogoBottom + 'px';
                }
            }
            repositionLogo();
            window.addEventListener('resize', repositionLogo);
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>